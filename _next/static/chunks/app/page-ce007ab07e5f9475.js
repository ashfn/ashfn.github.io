(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{53373:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,48173,23)),Promise.resolve().then(r.bind(r,76559)),Promise.resolve().then(r.bind(r,53495)),Promise.resolve().then(r.bind(r,47608))},76559:(e,t,r)=>{"use strict";r.d(t,{PageTransition:()=>s});var n=r(95155),i=r(18606);let a={hidden:{opacity:0},enter:{opacity:1},exit:{opacity:0}},s=e=>{let{children:t}=e;return(0,n.jsx)(i.P.div,{variants:a,initial:"hidden",animate:"enter",exit:"exit",transition:{type:"easeInOut",duration:.5},children:t})}},53495:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(12115);let i={S:[[!1,!0,!0,!1],[!0,!1,!1,!1],[!1,!0,!0,!1],[!1,!1,!1,!0]],N:[[!0,!1,!1,!0],[!0,!0,!1,!0],[!0,!1,!0,!0],[!0,!1,!1,!0]],A:[[!1,!0,!0,!1],[!0,!1,!1,!0],[!0,!0,!0,!0],[!0,!1,!1,!0]],K:[[!0,!1,!1,!0],[!0,!1,!0,!1],[!0,!0,!1,!1],[!0,!1,!0,!1]],E:[[!0,!0,!0,!0],[!0,!1,!1,!1],[!0,!0,!0,!1],[!0,!0,!0,!0]]};function a(){let[e,t]=(0,n.useState)({snake:[{x:10,y:2}],food:{x:15,y:2},direction:{x:1,y:0},isGameActive:!1,isGameOver:!1,isStarting:!1,score:0}),r=(0,n.useRef)(""),a=(0,n.useRef)(""),s=(0,n.useRef)(null),c=(0,n.useRef)(null),o=(0,n.useRef)(null),l=()=>{{let e=localStorage.getItem("snakeHighScore");return e?parseInt(e,10):0}},u=e=>{e>l()&&localStorage.setItem("snakeHighScore",e.toString())},d=e=>{let t=[,,,,].fill(null).map(()=>Array(20).fill(!1)),r=Math.max(0,Math.floor((20-4*e.length)/2));for(let n=0;n<e.length;n++){let a=i[e[n]];if(a)for(let e=0;e<4;e++)for(let i=0;i<4;i++){let s=r+4*n+i;s<20&&a[e][i]&&(t[e][s]=!0)}}return t},m=(e,t,r)=>{let n;r?n=r:(n=[,,,,].fill(null).map(()=>Array(20).fill(!1)),e&&e.forEach(e=>{let{x:t,y:r}=e;t>=0&&t<20&&r>=0&&r<4&&(n[r][t]=!0)}),t&&t.x>=0&&t.x<20&&t.y>=0&&t.y<4&&(n[t.y][t.x]=!0));let i="";for(let e=0;e<10;e++){let t=10240;for(let r=0;r<4;r++)for(let i=0;i<2;i++){let a=2*e+i,s=r;a<20&&s<4&&n[s][a]&&(t|=[[1,8],[2,16],[4,32],[64,128]][r][i])}i+=String.fromCharCode(t)}return i},v=e=>{let t;do t={x:Math.floor(20*Math.random()),y:Math.floor(4*Math.random())};while(e.some(e=>e.x===t.x&&e.y===t.y));return t},h=(e,t)=>{for(let r=1;r<t.length;r++)if(t[r].x===e.x&&t[r].y===e.y)return!0;return!1},y=e=>({x:(e.x%20+20)%20,y:(e.y%4+4)%4}),f=(0,n.useCallback)(()=>{t(e=>{if(!e.isGameActive||e.isGameOver)return e;let t=e.snake[0],r=y({x:t.x+e.direction.x,y:t.y+e.direction.y});if(h(r,e.snake))return u(e.score),{...e,isGameActive:!1,isGameOver:!0};let n=[r,...e.snake],i=e.food,a=e.score;return r.x===e.food.x&&r.y===e.food.y?(i=v(n),a+=1):n.pop(),{...e,snake:n,food:i,score:a}})},[]),x=()=>{document.title="GAME OVER",window.umami&&window.umami.track("snake-played",{score:e.score}),c.current=setTimeout(()=>{document.title=r.current,t(e=>({...e,isGameOver:!1})),window.dispatchEvent(new CustomEvent("snakeGameEnd"))},3e3)},w=()=>{t(e=>({...e,isGameActive:!1})),s.current&&(clearInterval(s.current),s.current=null),c.current&&clearTimeout(c.current),x()},k=(0,n.useCallback)(e=>{let r=e.key.toLowerCase();1===r.length&&/[a-z]/.test(r)&&(a.current+=r,a.current.length>5&&(a.current=a.current.slice(-5)),a.current.includes("snake")&&(a.current="",t(e=>{if(!e.isGameActive&&!e.isGameOver&&!e.isStarting){let r={...e,isStarting:!0};return document.title=m(void 0,void 0,d("SNAKE")),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{t(e=>{let t=[{x:10,y:2}];return{snake:t,food:v(t),direction:{x:1,y:0},isGameActive:!0,isGameOver:!1,isStarting:!1,score:0}}),console.log("Game starting"),window.dispatchEvent(new CustomEvent("snakeGameStart",{detail:{score:0,highScore:l()}}))},2e3),r}return e}))),t(t=>{if(t.isGameActive&&!t.isStarting&&t.snake.length>1){let r=null;switch(e.code){case"ArrowUp":case"KeyW":0===t.direction.y&&(r={x:0,y:-1});break;case"ArrowDown":case"KeyS":0===t.direction.y&&(r={x:0,y:1});break;case"ArrowLeft":case"KeyA":0===t.direction.x&&(r={x:-1,y:0});break;case"ArrowRight":case"KeyD":0===t.direction.x&&(r={x:1,y:0})}if(r){e.preventDefault();let n=t.snake[0],i=t.snake[1],a=y({x:n.x+r.x,y:n.y+r.y});return i&&a.x===i.x&&a.y===i.y?t:{...t,direction:r}}}else if(t.isGameActive&&!t.isStarting){let r=null;switch(e.code){case"ArrowUp":case"KeyW":r={x:0,y:-1};break;case"ArrowDown":case"KeyS":r={x:0,y:1};break;case"ArrowLeft":case"KeyA":r={x:-1,y:0};break;case"ArrowRight":case"KeyD":r={x:1,y:0}}if(r)return e.preventDefault(),{...t,direction:r}}return t})},[]);(0,n.useEffect)(()=>(e.isGameActive?(s.current&&clearInterval(s.current),s.current=setInterval(f,300)):s.current&&(clearInterval(s.current),s.current=null),()=>{s.current&&clearInterval(s.current)}),[e.isGameActive,f]),(0,n.useEffect)(()=>{if(e.isGameActive){let t=m(e.snake,e.food);document.title=t}else e.isGameOver&&w()},[e.snake,e.food,e.score,e.isGameOver,e.isGameActive]),(0,n.useEffect)(()=>{e.isGameActive&&window.dispatchEvent(new CustomEvent("snakeScoreUpdate",{detail:{score:e.score,highScore:l()}}))},[e.score,e.isGameActive]);let g=(0,n.useCallback)(()=>{document.hidden&&t(e=>e.isGameActive||e.isStarting||e.isGameOver?(s.current&&(clearInterval(s.current),s.current=null),c.current&&(clearTimeout(c.current),c.current=null),o.current&&(clearTimeout(o.current),o.current=null),document.title=r.current,window.dispatchEvent(new CustomEvent("snakeGameEnd")),{snake:[{x:10,y:2}],food:{x:15,y:2},direction:{x:1,y:0},isGameActive:!1,isGameOver:!1,isStarting:!1,score:0}):e)},[]);return(0,n.useEffect)(()=>(r.current=document.title,document.addEventListener("keydown",k),document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("keydown",k),document.removeEventListener("visibilitychange",g),s.current&&clearInterval(s.current),c.current&&clearTimeout(c.current),o.current&&clearTimeout(o.current),document.title=r.current}),[k,g]),null}},47608:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(95155),i=r(12115);function a(){let[e,t]=(0,i.useState)(!1),[r,a]=(0,i.useState)(!1),[s,c]=(0,i.useState)({score:0,highScore:0}),[o,l]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=()=>{a(window.innerWidth>=768)};e(),window.addEventListener("resize",e);let r=e=>{t(!0),c(e.detail)},n=e=>{c(e.detail),e.detail.score>=1&&l(!0)},i=()=>{t(!1)};return window.addEventListener("snakeGameStart",r),window.addEventListener("snakeScoreUpdate",n),window.addEventListener("snakeGameEnd",i),()=>{window.removeEventListener("resize",e),window.removeEventListener("snakeGameStart",r),window.removeEventListener("snakeScoreUpdate",n),window.removeEventListener("snakeGameEnd",i)}},[]),r)?(0,n.jsx)("div",{className:"fixed bottom-4 right-4 text-right",children:e?(0,n.jsx)("div",{className:"text-ashgray opacity-60 text-sm",children:o||s.highScore>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Score: ",s.score]}),s.highScore>0&&(0,n.jsxs)("div",{children:["High: ",s.highScore]})]}):(0,n.jsx)("div",{children:"Look up at the tab! Use arrow keys or WASD."})}):(0,n.jsx)("p",{className:"text-ashgray opacity-60 text-sm",children:s.highScore>0||o?(0,n.jsx)(n.Fragment,{children:"Type snake to play a hidden game."}):(0,n.jsx)(n.Fragment,{children:"Type snake - look at the tab and use arrow keys."})})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[606,173,441,517,358],()=>t(53373)),_N_E=e.O()}]);